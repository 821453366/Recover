<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.eu.front.dao.RecoveryDao">
    <!-- Recovery的resultMap,column是给数据库列起的别名,它对应property类的属性-->
    <resultMap id="result_Recovery_Map" type="com.eu.front.entity.Recovery">
        <id column="id" property="id" />
        <result column="recovery_year" property="recoveryYear" />
        <result column="recovery_month" property="recoveryMonth" />
        <result column="recovery_code" property="recoveryCode" />
        <result column="recovery_steel_id" property="recoverySteelId" />
        <result column="recovery_capacity" property="recoveryCapacity" />
        <result column="recovery_pirce" property="recoveryPirce" />
        <result column="recovary_storage_id" property="recovaryStorageId" />
    </resultMap>

    <!-- 数据库中表名为:tb_recovery的列名,as前是数据库的列明,as后是列的别名用于映射成实体类中的属性,需要注意的是别名必须与resultMap中的column别名一致 -->
    <sql id="tb_recovery_Column">
        tb_recovery.id as id
        ,tb_recovery.recovery_year as recovery_year
        ,tb_recovery.recovery_month as recovery_month
        ,tb_recovery.recovery_code as recovery_code
        ,tb_recovery.recovery_steel_id as recovery_steel_id
        ,tb_recovery.recovery_capacity as recovery_capacity
        ,tb_recovery.recovery_pirce as recovery_pirce
        ,tb_recovery.recovary_storage_id as recovary_storage_id
    </sql>

    <!--获得类名为:Recovery对应的数据库表的数据总行数 -->
    <select id="getRecoveryRowCount" resultType="java.lang.Long">
        select count(id) from tb_recovery
    </select>
    <!-- 获得类名为:Recovery对应数据库中表的数据集合 -->
    <select id="selectRecovery" resultMap="result_Recovery_Map">
        select 
        <include refid="tb_recovery_Column" /> 
        from tb_recovery
    </select> 

    <!-- 获得一个Recovery对象,以参数Recovery对象中不为空的属性作为条件进行查询-->
    <select id="selectRecoveryByObj" parameterType="com.eu.front.entity.Recovery" resultMap="result_Recovery_Map">
        select 
            <include refid="tb_recovery_Column" /> 
        from tb_recovery
        <where>
            <if test="recovaryStorageId != null "> and tb_recovery.recovary_storage_id = #{recovaryStorageId}</if>
            <if test="recoveryPirce != null "> and tb_recovery.recovery_pirce = #{recoveryPirce}</if>
            <if test="recoveryCapacity != null "> and tb_recovery.recovery_capacity = #{recoveryCapacity}</if>
            <if test="recoverySteelId != null "> and tb_recovery.recovery_steel_id = #{recoverySteelId}</if>
            <if test="recoveryCode != null "> and tb_recovery.recovery_code = #{recoveryCode}</if>
            <if test="recoveryMonth != null "> and tb_recovery.recovery_month = #{recoveryMonth}</if>
            <if test="recoveryYear != null "> and tb_recovery.recovery_year = #{recoveryYear}</if>
            <if test="id != null "> and tb_recovery.id = #{id}</if>
        </where>
    </select> 

    <!-- 通过Recovery的id获得对应数据库中表的数据对象-->
    <select id="selectRecoveryById" parameterType="java.lang.Integer" resultMap="result_Recovery_Map">
        select 
            <include refid="tb_recovery_Column" /> 
        from tb_recovery
        where tb_recovery.id = #{id}
    </select> 

    <!-- 将Recovery插入到对应数据库的表中,包括属性值为null的数据-->

    <insert id="insertRecovery" parameterType="com.eu.front.entity.Recovery">
        insert into tb_recovery(id,recovery_year,recovery_month,recovery_code,recovery_steel_id,recovery_capacity,recovery_pirce,recovary_storage_id) 
        values(#{id},#{recoveryYear},#{recoveryMonth},#{recoveryCode},#{recoverySteelId},#{recoveryCapacity},#{recoveryPirce},#{recovaryStorageId})
    </insert>

    <!-- 将Recovery中属性值不为null的数据,插入到对应数据库的表中-->
    <insert id="insertNonEmptyRecovery" parameterType="com.eu.front.entity.Recovery">
        insert into tb_recovery
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">id,</if>
            <if test="recoveryYear != null">recovery_year,</if>
            <if test="recoveryMonth != null">recovery_month,</if>
            <if test="recoveryCode != null">recovery_code,</if>
            <if test="recoverySteelId != null">recovery_steel_id,</if>
            <if test="recoveryCapacity != null">recovery_capacity,</if>
            <if test="recoveryPirce != null">recovery_pirce,</if>
            <if test="recovaryStorageId != null">recovary_storage_id,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null"> #{id},</if>
            <if test="recoveryYear != null"> #{recoveryYear},</if>
            <if test="recoveryMonth != null"> #{recoveryMonth},</if>
            <if test="recoveryCode != null"> #{recoveryCode},</if>
            <if test="recoverySteelId != null"> #{recoverySteelId},</if>
            <if test="recoveryCapacity != null"> #{recoveryCapacity},</if>
            <if test="recoveryPirce != null"> #{recoveryPirce},</if>
            <if test="recovaryStorageId != null"> #{recovaryStorageId},</if>
        </trim>
    </insert>

    <!-- 通过Recovery的id将数据库表中对应的数据删除-->
    <delete id="deleteRecoveryById" parameterType="java.lang.Integer">
        delete from tb_recovery
        where id = #{id}
    </delete>

    <!-- 通过Recovery的id将Recovery的数据更新到数据库中对应的表,包括值null的数据-->
    <update id="updateRecoveryById" parameterType="com.eu.front.entity.Recovery">
        update tb_recovery set
            recovery_year=#{recoveryYear}
            ,recovery_month=#{recoveryMonth}
            ,recovery_code=#{recoveryCode}
            ,recovery_steel_id=#{recoverySteelId}
            ,recovery_capacity=#{recoveryCapacity}
            ,recovery_pirce=#{recoveryPirce}
            ,recovary_storage_id=#{recovaryStorageId}
        where id=#{id}
    </update>

    <!-- 通过Recovery的id将Recovery中属性值不为null的数据更新到数据库对应的表中-->
    <update id="updateNonEmptyRecoveryById" parameterType="com.eu.front.entity.Recovery">
        update tb_recovery
        <set>
            <if test="recoveryYear != null">
                recovery_year=#{recoveryYear},
            </if>
            <if test="recoveryMonth != null">
                recovery_month=#{recoveryMonth},
            </if>
            <if test="recoveryCode != null">
                recovery_code=#{recoveryCode},
            </if>
            <if test="recoverySteelId != null">
                recovery_steel_id=#{recoverySteelId},
            </if>
            <if test="recoveryCapacity != null">
                recovery_capacity=#{recoveryCapacity},
            </if>
            <if test="recoveryPirce != null">
                recovery_pirce=#{recoveryPirce},
            </if>
            <if test="recovaryStorageId != null">
                recovary_storage_id=#{recovaryStorageId},
            </if>
        </set>
        where id=#{id}
    </update>

</mapper>